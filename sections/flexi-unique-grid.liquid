<!-- /sections/flexi-unique-grids.liquid -->
{{ 'flexi-styling.css' | asset_url | stylesheet_tag }}

{%- liquid
  assign sectionid = section.id

  assign bg_color = section.settings.bg_color 
  assign padding_top = section.settings.padding_top
  assign padding_bottom = section.settings.padding_bottom
  assign width = section.settings.width
  assign gap = section.settings.gap
  assign stack_blocks = section.settings.stack_blocks
  assign layout = section.settings.layout
  assign display_options = section.settings.display_options

  assign mobile_top_padding = section.settings.padding_top | times: 0.6 | round
  assign mobile_bottom_padding = section.settings.padding_bottom | times: 0.6 | round

  assign block_height = section.settings.block_height

  assign grid_classes = 'flexi-block-a,flexi-block-b,flexi-block-c,flexi-block-d,flexi-block-e, flexi-block-f, flexi-block-g' | split: ','
-%}

{%- style -%}
    .flexi-unique-grids--{{ sectionid }} {
        background-color: {{ bg_color }};
        padding-top: {{ padding_top }}px;
        padding-bottom: {{ padding_bottom }}px;
        padding-right: 2em;
        padding-left: 2em;
    }

    @media only screen and (max-width: 768px) {
       .flexi-unique-grids--{{ sectionid }} {
            padding-top: {{ mobile_top_padding }}px;
            padding-bottom: {{ mobile_bottom_padding }}px;
            padding-right: 0.5em;
            padding-left: 0.5em;
        }
    }

    .flexi-blocks-wrapper--{{ sectionid }} {
        display: flex;
        justify-content: center;
        align-items: center;
        margin: auto;
        max-width: {{ width }}px;
    }

    .flexi-blocks--{{ sectionid }} {
        display: grid;
        grid-template-columns: 1fr;
        justify-content: center;
        height: 100%;
        width: 100%;
    }

    .flexi-blocks-container--{{ sectionid }} {
        padding: 0.5em;
    }

    .flexi--unique-grids-container-{{ section.id }} {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      grid-template-rows: repeat(3, {{ block_height }}px);
      grid-gap: {{ gap }}px;
      justify-content: center;
      grid-auto-flow: row;
      {% case layout %}
        {% when 'layout_1' %}
            grid-template-areas:
            "flexi-block-a flexi-block-a flexi-block-b flexi-block-c"
            "flexi-block-d flexi-block-e flexi-block-f flexi-block-f"
            "flexi-block-g flexi-block-g flexi-block-f flexi-block-f";
        {% when 'layout_2' %}
            grid-template-areas:
                "flexi-block-a flexi-block-a flexi-block-b flexi-block-c"
                "flexi-block-a flexi-block-a flexi-block-d flexi-block-d"
                "flexi-block-e flexi-block-e flexi-block-f flexi-block-g";
        {% when 'layout_3' %}
            grid-template-areas:
                "flexi-block-a flexi-block-a flexi-block-b flexi-block-b"
                "flexi-block-a flexi-block-a flexi-block-c flexi-block-c"
                "flexi-block-d flexi-block-e flexi-block-f flexi-block-g";
        {% when 'layout_4' %}
            grid-template-areas:
                "flexi-block-a flexi-block-b flexi-block-c flexi-block-d"
                "flexi-block-e flexi-block-e flexi-block-f flexi-block-f"
                "flexi-block-e flexi-block-e flexi-block-g flexi-block-g";
        {% when 'layout_5' %}
            grid-template-areas:
                "flexi-block-a flexi-block-a flexi-block-b flexi-block-d"
                "flexi-block-c flexi-block-c flexi-block-c flexi-block-d"
                "flexi-block-e flexi-block-f flexi-block-g flexi-block-g";
        {% when 'layout_6' %}
            grid-template-areas:
                "flexi-block-a flexi-block-a flexi-block-b flexi-block-d"
                "flexi-block-c flexi-block-c flexi-block-c flexi-block-d"
                "flexi-block-e flexi-block-f flexi-block-f flexi-block-g";
        {% when 'layout_7' %}
            grid-template-areas:
                "flexi-block-a flexi-block-b flexi-block-b flexi-block-c"
                "flexi-block-a flexi-block-d flexi-block-d flexi-block-d"
                "flexi-block-e flexi-block-f flexi-block-f flexi-block-g";
        {% when 'layout_8' %}
            grid-template-areas:
                "flexi-block-a flexi-block-c flexi-block-d flexi-block-e"
                "flexi-block-b flexi-block-c flexi-block-g flexi-block-g"
                "flexi-block-f flexi-block-f flexi-block-g flexi-block-g";
        {% when 'layout_9' %}
            grid-template-areas:
                "flexi-block-a flexi-block-c flexi-block-d flexi-block-e"
                "flexi-block-b flexi-block-c flexi-block-g flexi-block-g"
                "flexi-block-f flexi-block-f flexi-block-g flexi-block-g";
      {% endcase %}
        height: fit-content;
    }

    .flexi-block-a { grid-area: flexi-block-a; }
    .flexi-block-b { grid-area: flexi-block-b; }
    .flexi-block-c { grid-area: flexi-block-c; }
    .flexi-block-d { grid-area: flexi-block-d; }
    .flexi-block-e { grid-area: flexi-block-e; }
    .flexi-block-f { grid-area: flexi-block-f; }
    .flexi-block-g { grid-area: flexi-block-g; }

  @media only screen and (max-width: 768px) {
    {% if stack_blocks %}
      .flexi--unique-grids-container-{{ section.id }} {
          grid-template-columns: 1fr;
          grid-template-rows: auto;
          grid-gap: {{ gap }}px;
          grid-template-areas:
                  "flexi-block-a"
                  "flexi-block-b"
                  "flexi-block-c"
                  "flexi-block-d"
                  "flexi-block-e"
                  "flexi-block-f"
                  "flexi-block-g";
      }
      {% else %}
      .flexi-unique-grids--{{ sectionid }} {
        padding-right: 0px;
        padding-left: 0px;
        overflow-x: hidden; 
    }

    .flexi--unique-grids-container-{{ section.id }} {
        display: flex;
        flex-wrap: nowrap;
        overflow-x: auto;
        scroll-behavior: smooth;
        -webkit-overflow-scrolling: touch;
        grid-gap: 0px;
        justify-content: start;
    }

    .flexi--unique-grids-container-{{ section.id }} > div {
        flex: 0 0 85vw;
        width: 85vw;
        height: 85vw;
        margin-right: 10px; 
    }

    .flexi--unique-grids-container-{{ section.id }} .flexi-block-a {
        margin-left: 0.5em;
    }
    .flexi--unique-grids-container-{{ section.id }} > div:last-child {
        margin-right: 0.5em;
    }
    {% endif %}
  }
{%- endstyle -%}

<section
  class="flexi-unique-grids flexi-unique-grids--{{ sectionid }} {{ display_options }}"
>
    <div id="flexi-embed-banner" style="display: none !important;">
        <p>Congrats on adding a Flexi section! ðŸŽ‰ Go to <strong>App Embeds on the left hand side if the screen in theme settings to remove this banner</strong>. <a href="https://www.loom.com/embed/16e29856e42b44ca9f0dfb6729397024?sid=c05f56fa-df24-48de-b42a-66f88c9c22ae">Make sure "Flexi Sections" is enabled.</a></p>
    </div>
  <div class="flexi-blocks-wrapper--{{ sectionid }}">
    <div class="flexi-blocks--{{ sectionid }}">
      <div class="flexi-blocks-container--{{ sectionid }}">
        {% for block in section.blocks %}
          {% case block.type %}
            {% when '@app' %}
              <div class="flexi--app-block--{{ block.id }}">
                {% render block %}
              </div>
          {% endcase %}
        {% endfor %}
      </div>

      <div class="flexi--unique-grids-container-{{ section.id }}">
        {% for block in section.blocks %}
          {% case block.type %}
            {% when 'image' %}

              {%- assign grid_class = grid_classes[forloop.index0] -%}
              <div class="{{ grid_class }}" {{ block.shopify_attributes }}>
                {% render 'flexi-unique-grid-image', block: block %}
              </div>

            {% when 'text-with-background' %}
              {%- assign grid_class = grid_classes[forloop.index0] -%}
              {%- assign link = block.settings.link -%}
              <div class="{{ grid_class }}" {{ block.shopify_attributes }}>
                {% render 'flexi-unique-grid-text', block: block, link: link %}
              </div>

            {% when 'icon-with-text' %}
              {%- assign grid_class = grid_classes[forloop.index0] -%}
              <div class="{{ grid_class }}" {{ block.shopify_attributes }}>
                {% render 'flexi-unique-grid-icon', block: block %}
              </div>

          {% endcase %}
        {% endfor %}
      </div>
    </div>
  </div>
</section>

{% schema %}
{
  "name": "Flexi â€¢ Unique grid",
  "class": "flexi-unique-grid",
  "settings": [
    {
      "type": "header",
      "content": "COLLAGE",
      "info": "Add images, and text in a collage format ro describe your brand."
    },
    {
      "type": "select",
      "id": "layout",
      "label": "Gallery layout",
      "options": [
        {
          "value": "layout_1",
          "label": "Layout 1"
        },
        {
          "value": "layout_2",
          "label": "Layout 2"
        },
        {
          "value": "layout_3",
          "label": "Layout 3"
        },
        {
          "value": "layout_4",
          "label": "Layout 4"
        },
        {
          "value": "layout_5",
          "label": "Layout 5"
        },
        {
          "value": "layout_6",
          "label": "Layout 6"
        },
        {
          "value": "layout_7",
          "label": "Layout 7"
        },
        {
          "value": "layout_8",
          "label": "Layout 8"
        },
        {
          "value": "layout_9",
          "label": "Layout 9"
        }
      ],
      "default": "layout_1"
    },
    {
      "type": "range",
      "id": "gap",
      "min": 0,
      "max": 48,
      "step": 2,
      "unit": "px",
      "label": "Space between blocks",
      "default": 12
    },
    {
      "type": "range",
      "id": "block_height",
      "min": 200,
      "max": 500,
      "step": 20,
      "unit": "px",
      "label": "Block height",
      "default": 260
    },
    {
      "type": "select",
      "id": "stack_blocks",
      "label": "Mobile layout",
      "default": "scroll",
      "info": "Make the blocks stack vertically instead of a horizontal scroll.",
      "options": [
        {
          "value": "scroll",
          "label": "Scroll"
        },
        {
          "value": "stack",
          "label": "Stack"
        }
      ]
    },
    {
      "type": "range",
      "id": "border_radius",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "label": "Border radius",
      "default": 8
    },
    {
      "type": "header",
      "content": "WIDTH"
    },
    {
      "type": "range",
      "id": "width",
      "min": 760,
      "max": 1440,
      "step": 20,
      "unit": "px",
      "label": "Max container width",
      "default": 1080
    },
    {
      "type": "header",
      "content": "COLORS"
    },
    {
      "type": "color",
      "id": "bg_color",
      "label": "Background color"
    },

    {
      "type": "header",
      "content": "VISIBILITY"
    },
    {
      "type": "select",
      "id": "display_options",
      "label": "Visible On",
      "default": "bl-hide-none",
      "options": [
        {
          "value": "bl-hide-none",
          "label": "All Screens"
        },
        {
          "value": "bl-hide-desktop",
          "label": "Mobile"
        },
        {
          "value": "bl-hide-mobile",
          "label": "Desktop"
        }
      ]
    },
    {
      "type": "header",
      "content": "SPACING"
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "label": "Top spacing",
      "default": 60
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "label": "Bottom spacing",
      "default": 60
    }
  ],
  "max_blocks": 10,
  "blocks": [
    {
      "type": "@app"
    },
    {
      "type": "image",
      "name": "Image",
      "settings": [
        {
          "type": "header",
          "content": "IMAGE"
        },
        {
          "type": "image_picker",
          "id": "image",
          "label": "Image"
        },
        {
          "type": "image_picker",
          "id": "mb_image",
          "label": "Mobile image"
        },
        {
          "type": "url",
          "id": "link",
          "label": "Image link"
        }
      ]
    },
    {
      "type": "text-with-background",
      "name": "Text with background",
      "settings": [
        {
          "type": "header",
          "content": "Link"
        },
        {
          "type": "url",
          "id": "link",
          "label": "Link",
          "info": "Add a page or product you want to redirect the user to."
        },
        {
          "type": "header",
          "content": "HEADING"
        },
        {
          "type": "inline_richtext",
          "id": "heading",
          "label": "Heading text",
          "default": "Heading"
        },
        {
          "type": "range",
          "id": "heading_font_size",
          "min": 12,
          "max": 48,
          "step": 1,
          "unit": "px",
          "label": "Heading font size",
          "default": 32
        },
        {
          "type": "color",
          "id": "heading_color",
          "label": "Heading color",
          "default": "#FFFFFF"
        },
        {
          "type": "header",
          "content": "DESCRIPTION"
        },
        {
          "type": "inline_richtext",
          "id": "description",
          "label": "Description text",
          "default": "Around 1-2 sentences describing the block."
        },
        {
          "type": "range",
          "id": "description_font_size",
          "min": 12,
          "max": 24,
          "step": 1,
          "unit": "px",
          "label": "Description font size",
          "default": 16
        },
        {
          "type": "color",
          "id": "description_color",
          "label": "Description color",
          "default": "#FFFFFF"
        },
        {
          "type": "header",
          "content": "BACKGROUND IMAGE"
        },
        {
          "type": "image_picker",
          "id": "bg_image",
          "label": "Background image"
        },
        {
          "type": "image_picker",
          "id": "mb_bg_image",
          "label": "Mobile background image"
        },
        {
          "type": "color",
          "id": "overlay_color",
          "label": "Image overlay color",
          "default": "#000000"
        },
        {
          "type": "range",
          "id": "opacity",
          "min": 0,
          "max": 100,
          "step": 5,
          "label": "Image overlay opacity",
          "default": 70
        },
        {
          "type": "header",
          "content": "SPACING"
        },
        {
          "type": "select",
          "id": "increase_padding",
          "label": "Space around text",
          "default": "2",
          "options": [
            {
              "value": "2",
              "label": "Small"
            },
            {
              "value": "3",
              "label": "Medium"
            },
            {
              "value": "4",
              "label": "Large"
            }
          ]
        },
        {
          "type": "range",
          "id": "gap",
          "min": 0,
          "max": 16,
          "step": 1,
          "unit": "px",
          "label": "Space between text",
          "default": 4
        }
      ]
    },
    {
      "type": "icon-with-text",
      "name": "Icon with text",
      "settings": [
        {
          "type": "header",
          "content": "POSITION"
      },
      {
          "type": "select",
          "id": "text_align",
          "label": "Text align",
          "default": "left",
          "options": [
            {
              "value": "left",
              "label": "Left"
            },
            {
              "value": "center",
              "label": "Center"
            }
          ]
      },
      {
          "type": "range",
          "id": "icon_spacing",
          "min": 0,
          "max": 100,
          "step": 1,
          "unit": "px",
          "label": "Icon bottom spacing",
          "default": 12
      },
      {
          "type": "header",
          "content": "ICON"
      },
      {
          "type": "select",
          "id": "svg_icon",
          "label": "Select icon",
          "default": "fa-cocktail",
          "options": [
            {
              "value": "fa-heart",
              "label": "Heart"
            },
            {
              "value": "fa-check",
              "label": "Check"
            },
            {
              "value": "fa-envelope",
              "label": "Envelope"
            },
            {
              "value": "fa-map-marker-alt",
              "label": "Location"
            },
            {
              "value": "fa-face-smile",
              "label": "Smile"
            },
            {
              "value": "fa-file",
              "label": "File"
            },
            {
              "value": "fa-list",
              "label": "List"
            },
            {
              "value": "fa-info-circle",
              "label": "Info"
            },
            {
              "value": "fa-calendar",
              "label": "Calendar"
            },
            {
              "value": "fa-store",
              "label": "Store"
            },
            {
              "value": "fa-box-open",
              "label": "Box"
            },
            {
              "value": "fa-cube",
              "label": "Cube"
            },
            {
              "value": "fa-cog",
              "label": "Settings"
            },
            {
              "value": "fa-comment",
              "label": "Comments"
            },
            {
              "value": "fa-utensils",
              "label": "Eat"
            },
            {
              "value": "fa-tree",
              "label": "Tree"
            },
            {
              "value": "fa-coffee",
              "label": "Mug"
            },
            {
              "value": "fa-cocktail",
              "label": "Cocktail"
            },
            {
              "value": "fa-hourglass-end",
              "label": "Hourglass"
            },
            {
              "value": "fa-star",
              "label": "Review"
            },
            {
              "value": "fa-sms",
              "label": "SMS"
            },
            {
              "value": "fa-search",
              "label": "Search"
            }
          ]
        },
        {
          "type": "image_picker",
          "id": "icon_image",
          "label": "Upload icon",
          "info": "Upload your own icon as an image."
        },
      {
          "type": "range",
          "id": "icon_size",
          "min": 0,
          "max": 100,
          "step": 1,
          "unit": "px",
          "label": "Icon size",
          "default": 20
      },
      {
          "type": "color",
          "id": "icon_color",
          "label": "Icon color",
          "default": "#000000"
      },
      {
        "type": "select",
        "id": "hide_icon",
        "label": "Icon visbility",
        "default": "block",
        "options": [
          {
            "value": "block",
            "label": "Show"
          },
          {
            "value": "none",
            "label": "Hide"
          }
        ]
      },
      {
          "type": "header",
          "content": "TEXT"
      },
      {
          "type": "inline_richtext",
          "id": "title",
          "label": "Title",
          "default": "Text"
      },
      {
          "type": "range",
          "id": "font_size",
          "min": 0,
          "max": 100,
          "step": 1,
          "unit": "px",
          "label": "Title font size",
          "default": 18
      }, 
      {
          "type": "inline_richtext",
          "id": "description",
          "label": "Description",
          "default": "Describe a how your brand works using 1-2 sentances."
      },
      {
          "type": "range",
          "id": "description_font_size",
          "min": 0,
          "max": 100,
          "step": 1,
          "unit": "px",
          "label": "Description font size",
          "default": 14
      }, 
        {
          "type": "header",
          "content": "COLORS"
        },
        {
          "type": "color",
          "id": "font_color",
          "label": "Font color",
          "default": "#000000"
        },
        {
          "type": "color",
          "id": "background_color",
          "label": "Background color",
          "default": "#FAFAFA"
        },
        {
          "type": "header",
          "content": "BORDER"
      },
      {
          "type": "color",
          "id": "line_color",
          "label": "Line color",
          "default": "#000000"
        },
        {
          "type": "select",
          "id": "show_border",
          "label": "Border visbility",
          "default": "hide",
          "options": [
            {
              "value": "show",
              "label": "Show"
            },
            {
              "value": "hide",
              "label": "Hide"
            }
          ]
      }
      ]
    }
  ],
  "presets": [
    {
      "name": "Flexi â€¢ Unique grid",
      "category": "Text",
      "blocks": [
        {
          "type": "text-with-background"
        },
        {
          "type": "image"
        },
        {
          "type": "image"
        },
        {
          "type": "text-with-background"
        },
        {
          "type": "image"
        },
        {
          "type": "text-with-background"
        },
        {
          "type": "image"
        }
      ]
    }
  ]
}
{% endschema %}
