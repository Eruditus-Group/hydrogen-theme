{%- liquid
    assign blockid = block.id
-%}

{% style %}
.flexi-carousel-block {
  display: flex; 
  height: 100%; 
  width: 100%;
  justify-content: center;
}
.bl--block-wrapper--{{ blockid }} .slide-{{ blockid }} {
    display: flex;
    flex-direction: column;
}
.bl--block-wrapper--{{ blockid }} .swiperImage-{{ blockid }} {
    width: 100%;
    height: 100%;
}
.bl--block-wrapper--{{ blockid }} .swiper a {
    width: 100%;
}
.swiper-slide {
    text-align: center;
    font-size: 18px;
    background: #fff;
    display: flex;
    justify-content: center;
    align-items: center;
    width: 100% !important;
    /* width: auto; */
}
.swiper-slide img {
    display: block;
    width: 100%;
    object-fit: fill;
}
.bl--block-wrapper--{{ blockid }} .swiper-button-next {
    top: calc(50% + 10px) !important;
    width: auto !important;
    height: auto !important;
    display: block !important;
    transition: opacity 0.3s ease;
}
.swiper-button-next:hover {
    opacity: 0.5;
}
.bl--block-wrapper--{{ blockid }} .swiper-button-prev {
    top: calc(50% + 10px) !important;
    width: auto !important;
    height: auto !important;
    display: block !important;
    transition: opacity 0.3s ease;
}
.swiper-button-prev:hover {
    opacity: 0.5;
}
.swiper-pagination {
    width: 100% !important;   
}
.bl--block-wrapper--{{ blockid }} .swiper [class^="swiper-button-"]::after{
    font-size: 24px;
    color: {{ block.settings.arrow_color }};
}
.bl--block-wrapper--{{ blockid }} .swiper-pagination-bullet {
    background-color: {{ block.settings.dot }} !important;
}
.bl-image-{{ blockid }} {
  margin: auto;
}
/* Warning Banner */
#flexi-warning-banner {
    padding: 12px 24px;
    border: solid 1px #f4c452;
    background-color: #fcefd4;
    border-radius: 12px;
    width: 100%;
}
#flexi-warning-banner p {
    color: #524f47;
}
{% endstyle %}

<div class="flexi-carousel-block {{ block.settings.display_options }}">
    <div class="bl--block-wrapper--{{ blockid }}" style="text-align: {{ block.settings.text_align }}; max-width: 100%;">

      {% if block.settings.image_1 == blank %}
        <div id="flexi-warning-banner">
          <p>Add images to get started.</p>
        </div>
      {% else %}

        <!-- Slider main container -->
        <div class="swiper swiperImage-{{ blockid }}">
            <div class="swiper-wrapper">
              {% if block.settings.image_1 != blank or block.settings.mb_image_1 != blank %}
                <div class="swiper-slide slide-{{ blockid }}">
                  <a href="{{ block.settings.url_1 }}">
                    <picture>
                      {% if block.settings.image_1 != blank %}
                        <source media="(min-width: 769px)" srcset="{{ block.settings.image_1 | img_url: '1440x' }}" alt="{{ block.settings.image_1.alt | escape }}">
                      {% endif %}
                      {% if block.settings.mb_image_1 != blank %}
                        <source media="(max-width: 768px)" srcset="{{ block.settings.mb_image_1 | img_url: '1080x' }}" alt="{{ block.settings.mb_image_1.alt | escape }}">
                      {% endif %}
                      <!-- Default to desktop image if available -->
                      {% if block.settings.image_1 != blank %}
                        <img class="bl-image-{{ blockid }}" src="{{ block.settings.image_1 | img_url: '1080x' }}" width="" height="" style="width: {{ block.settings.image_width }}%;" alt="{{ block.settings.image_1.alt | escape }}">
                      {% endif %}
                    </picture>
                  </a>
                </div>
              {% endif %}
              
                {% if block.settings.image_2 != blank or block.settings.mb_image_2 != blank %}
                    <div class="swiper-slide slide-{{ blockid }}">
                      <a href="{{ block.settings.url_2 }}">
                        <picture>
                          {% if block.settings.image_2 != blank %}
                            <source media="(min-width: 769px)" srcset="{{ block.settings.image_2 | img_url: '1440x' }}" alt="{{ block.settings.image_2.alt | escape }}">
                          {% endif %}
                          {% if block.settings.mb_image_2 != blank %}
                            <source media="(max-width: 768px)" srcset="{{ block.settings.mb_image_2 | img_url: '1080x' }}" alt="{{ block.settings.mb_image_2.alt | escape }}">
                          {% endif %}
                          <!-- Default to desktop image if available -->
                          {% if block.settings.image_2 != blank %}
                            <img class="bl-image-{{ blockid }}" src="{{ block.settings.image_2 | img_url: '1080x' }}" width="" height="" style="width: {{ block.settings.image_width }}%;" alt="{{ block.settings.image_2.alt | escape }}">
                          {% endif %}
                        </picture>
                      </a>
                    </div>
                {% endif %}
                {% if block.settings.image_3 != blank or block.settings.mb_image_3 != blank %}
                    <div class="swiper-slide slide-{{ blockid }}">
                      <a href="{{ block.settings.url_3 }}">
                        <picture>
                          {% if block.settings.image_3 != blank %}
                            <source media="(min-width: 769px)" srcset="{{ block.settings.image_3 | img_url: '1440x' }}" alt="{{ block.settings.image_3.alt | escape }}">
                          {% endif %}
                          {% if block.settings.mb_image_3 != blank %}
                            <source media="(max-width: 768px)" srcset="{{ block.settings.mb_image_3 | img_url: '1080x' }}" alt="{{ block.settings.mb_image_3.alt | escape }}">
                          {% endif %}
                          <!-- Default to desktop image if available -->
                          {% if block.settings.image_3 != blank %}
                            <img class="bl-image-{{ blockid }}" src="{{ block.settings.image_3 | img_url: '1080x' }}" width="" height="" style="width: {{ block.settings.image_width }}%;" alt="{{ block.settings.image_3.alt | escape }}">
                          {% endif %}
                        </picture>
                      </a>
                    </div>
                {% endif %}
                {% if block.settings.image_4 != blank or block.settings.mb_image_4 != blank %}
                    <div class="swiper-slide slide-{{ blockid }}">
                      <a href="{{ block.settings.url_4 }}">
                        <picture>
                          {% if block.settings.image_4 != blank %}
                            <source media="(min-width: 769px)" srcset="{{ block.settings.image_4 | img_url: '1440x' }}" alt="{{ block.settings.image_4.alt | escape }}">
                          {% endif %}
                          {% if block.settings.mb_image_4 != blank %}
                            <source media="(max-width: 768px)" srcset="{{ block.settings.mb_image_4 | img_url: '1080x' }}" alt="{{ block.settings.mb_image_4.alt | escape }}">
                          {% endif %}
                          <!-- Default to desktop image if available -->
                          {% if block.settings.image_4 != blank %}
                            <img class="bl-image-{{ blockid }}" src="{{ block.settings.image_4 | img_url: '1080x' }}" width="" height="" style="width: {{ block.settings.image_width }}%;" alt="{{ block.settings.image_4.alt | escape }}">
                          {% endif %}
                        </picture>
                      </a>
                    </div>
                {% endif %}
                {% if block.settings.image_5 != blank or block.settings.mb_image_5 != blank %}
                    <div class="swiper-slide slide-{{ blockid }}">
                      <a href="{{ block.settings.url_5 }}">
                        <picture>
                          {% if block.settings.image_5 != blank %}
                            <source media="(min-width: 769px)" srcset="{{ block.settings.image_5 | img_url: '1440x' }}" alt="{{ block.settings.image_5.alt | escape }}">
                          {% endif %}
                          {% if block.settings.mb_image_5 != blank %}
                            <source media="(max-width: 768px)" srcset="{{ block.settings.mb_image_5 | img_url: '1080x' }}" alt="{{ block.settings.mb_image_5.alt | escape }}">
                          {% endif %}
                          <!-- Default to desktop image if available -->
                          {% if block.settings.image_5 != blank %}
                            <img class="bl-image-{{ blockid }}" src="{{ block.settings.image_5 | img_url: '1080x' }}" width="" height="" style="width: {{ block.settings.image_width }}%;" alt="{{ block.settings.image_5.alt | escape }}">
                          {% endif %}
                        </picture>
                      </a>
                    </div>
                {% endif %}
            </div>
            {% if block.settings.hide_arrows == false %}
                <div class="swiper-button-next"></div>
                <div class="swiper-button-prev"></div>
            {% endif %}
            {% if block.settings.hide_dots == false %}
                <div class="swiper-pagination"></div>
            {% endif %}
          </div>

      {% endif %}

    </div>
</div>

<!-- Swiper JS -->

<!-- Initialize Swiper -->
<script>
  window.addEventListener('DOMContentLoaded', (event) => {

    document.querySelectorAll('.swiperImage-{{ blockid }}').forEach((swiperContainer) => {

        const swiper = new Swiper(swiperContainer, {
            slidesPerView: 1,
            slidesPerGroup: 1,
              spaceBetween: 0,
            grabCursor: true,
            loop: true,
            {% if block.settings.auto_scroll %}
            autoplay: {
                delay: 2500,
                disableOnInteraction: false,
            },
            {% endif %}
            pagination: {
                el: swiperContainer.querySelector('.swiper-pagination'),
                clickable: true,
            },
            navigation: {
                nextEl: swiperContainer.querySelector('.swiper-button-next'),
                prevEl: swiperContainer.querySelector('.swiper-button-prev'),
            },
        });
    });
  });
</script>